{% load static i18n %}
{% load render_bundle from webpack_loader %}

<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE }}">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>
      {% block title %}
        Cyment.com
      {% endblock title %}
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Agilidad profunda" />
    <meta name="author" content="Alan Cyment" />
    <link rel="icon" href="{% static 'images/favicons/favicon.ico' %}" />
    <link rel="apple-touch-icon"
          sizes="180x180"
          href="{% static 'images/favicons/apple-touch-icon.png' %}" />
    <link rel="icon"
          type="image/png"
          sizes="32x32"
          href="{% static 'images/favicons/favicon-32x32.png' %}" />
    <link rel="icon"
          type="image/png"
          sizes="16x16"
          href="{% static 'images/favicons/favicon-16x16.png' %}" />
    <link rel="manifest" href="{% static 'images/favicons/site.webmanifest' %}" />
    {% block javascript %}
      {% render_bundle 'main' 'css' 'DEFAULT' %}
      {% block css %}
        <!-- Your stuff: Third-party CSS libraries go here -->
        <!-- This file stores project-specific CSS -->
      {% endblock css %}
      <!-- Le javascript
    ================================================== -->
      {# Placed at the top of the document so pages load faster with defer #}
      <!-- Webpack rendered Javascript -->
    {% endblock javascript %}
  </head>
  <body>
    <header id="site-header">
      <button id="menu-toggle" aria-label="Menu" aria-expanded="false">Menu</button>
      <nav id="site-nav" aria-label="Primary" class="is-hidden">
      </nav>
    </header>
    <div id="main">
      <div id="app"></div>
    </div>
    {% block inline_javascript %}
      {% comment %}
    Script tags with only code, no src (defer by default). To run
    with a "defer" so that you run inline code:
    <script>
      window.addEventListener('DOMContentLoaded', () => {
        /* Run whatever you want */
      });
    </script>
      {% endcomment %}
    {% endblock inline_javascript %}
    <script>
      (function() {
        function initMenu() {
          const btn = document.getElementById('menu-toggle');
          const nav = document.getElementById('site-nav');
          if (!btn || !nav) return;
          const close = () => {
            btn.setAttribute('aria-expanded', 'false');
            nav.classList.add('is-hidden');
          };
          const open = () => {
            btn.setAttribute('aria-expanded', 'true');
            nav.classList.remove('is-hidden');
          };
          btn.addEventListener('click', () => (btn.getAttribute('aria-expanded') === 'true' ? close() : open()));
          document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') close();
          });
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initMenu);
        } else {
          initMenu();
        }
      })();
    </script>
    {% render_bundle 'main' 'js' 'DEFAULT' %}
  </body>
</html>
